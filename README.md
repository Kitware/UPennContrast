# NimbusImage

[![Github Actions][github-actions-image]][github-actions-url]

## Documentation

See this [git book](https://arjun-raj-lab.gitbook.io/nimbusimage) for documentation.

## Development environment

Clone the repo and install node modules:

```sh
git clone https://github.com/Kitware/UPennContrast.git
cd UPennContrast
pnpm install
```

Compile C++ code to wasm with this command:

```sh
pnpm emscripten-build
```

This will run the command `pnpm emscripten-build:release`.
You can also run `pnpm emscripten-build:debug` to build with debug symbols.

Start docker images and run the server:

```sh
docker compose build
docker compose up -d
pnpm dev
```

To setup an environment for native C++ development for ITK, see [`itk/README.md`](./itk/README.md).

For technical documentation about tools, see [`TOOLS.md`](./TOOLS.md).

### Girder Defaults

By default, a admin user will be created with the name `admin` and the password `password`. To use a different admin user, register a new user, log in as the `admin` user and make the new user an admin, then delete the original `admin` user.

A default assetstore is also created.

To change the default settings of the landing pange for unauthenticated users, create a `.env` file following this pattern:
```
VITE_GIRDER_URL=http://localhost:8080
VITE_DEFAULT_USER=User
VITE_DEFAULT_PASSWORD=Password
```

The users that already opened the app once will have the field "Girder Domain" filled with the last domain they used. Otherwise, the `VITE_GIRDER_URL` variable will be used. If the default user and password are set, the app will try to log in with these credentials.

### Compiles and minifies for production

To compile for production, run this command:

```
pnpm build
```

It will also produce a `stats.html` file at the root of the project.
This file is generated by the `rollup-plugin-visualizer`.
You can change the generated file by playing with the options of the plugin in `vite.config.ts` (see the [github page](https://github.com/btd/rollup-plugin-visualizer?tab=readme-ov-file#options) of the plugin).

If you want to preview the production build:

```
pnpm serve
```

### Lints and fixes files

```
pnpm lint:fix
```

### Run typescript compiler

```
pnpm tsc
```

### Customize configuration

See [Configuration Reference](https://cli.vuejs.org/config/).

[github-actions-image]: https://github.com/Kitware/UPennContrast/workflows/node/badge.svg
[github-actions-url]: https://github.com/Kitware/UPennContrast/actions
